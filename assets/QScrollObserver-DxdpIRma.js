import{r as E,m as P,D as v,c as w,g as x,o as m,X as S,R as p,h as L,a7 as b,w as T}from"./index-CxLXl_oA.js";import{s as H,h as R,l as C,m as D}from"./scroll-BtoeZSBr.js";function Q(){const t=E(!P.value);return t.value===!1&&v(()=>{t.value=!0}),{isHydrated:t}}const O=typeof ResizeObserver<"u",y=O===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},$=w({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(t,{emit:g}){let e=null,i,r={width:-1,height:-1};function c(o){o===!0||t.debounce===0||t.debounce==="0"?s():e===null&&(e=setTimeout(s,t.debounce))}function s(){if(e!==null&&(clearTimeout(e),e=null),i){const{offsetWidth:o,offsetHeight:n}=i;(o!==r.width||n!==r.height)&&(r={width:o,height:n},g("resize",r))}}const{proxy:d}=x();if(d.trigger=c,O===!0){let o;const n=u=>{i=d.$el.parentNode,i?(o=new ResizeObserver(c),o.observe(i),s()):u!==!0&&p(()=>{n(!0)})};return v(()=>{n()}),m(()=>{e!==null&&clearTimeout(e),o!==void 0&&(o.disconnect!==void 0?o.disconnect():i&&o.unobserve(i))}),S}else{let o=function(){e!==null&&(clearTimeout(e),e=null),l!==void 0&&(l.removeEventListener!==void 0&&l.removeEventListener("resize",c,b.passive),l=void 0)},n=function(){o(),i?.contentDocument&&(l=i.contentDocument.defaultView,l.addEventListener("resize",c,b.passive),s())};const{isHydrated:u}=Q();let l;return v(()=>{p(()=>{i=d.$el,i&&n()})}),m(o),()=>{if(u.value===!0)return L("object",{class:"q--avoid-card-border",style:y.style,tabindex:-1,type:"text/html",data:y.url,"aria-hidden":"true",onLoad:n})}}}}),{passive:z}=b,M=["both","horizontal","vertical"],j=w({name:"QScrollObserver",props:{axis:{type:String,validator:t=>M.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:H},emits:["scroll"],setup(t,{emit:g}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let i=null,r,c;T(()=>t.scrollTarget,()=>{o(),d()});function s(){i?.();const l=Math.max(0,C(r)),f=D(r),a={top:l-e.position.top,left:f-e.position.left};if(t.axis==="vertical"&&a.top===0||t.axis==="horizontal"&&a.left===0)return;const h=Math.abs(a.top)>=Math.abs(a.left)?a.top<0?"up":"down":a.left<0?"left":"right";e.position={top:l,left:f},e.directionChanged=e.direction!==h,e.delta=a,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),g("scroll",{...e})}function d(){r=R(c,t.scrollTarget),r.addEventListener("scroll",n,z),n(!0)}function o(){r!==void 0&&(r.removeEventListener("scroll",n,z),r=void 0)}function n(l){if(l===!0||t.debounce===0||t.debounce==="0")s();else if(i===null){const[f,a]=t.debounce?[setTimeout(s,t.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];i=()=>{a(f),i=null}}}const{proxy:u}=x();return T(()=>u.$q.lang.rtl,s),v(()=>{c=u.$el.parentNode,d()}),m(()=>{i?.(),o()}),Object.assign(u,{trigger:n,getPosition:()=>e}),S}});export{$ as Q,j as a};
